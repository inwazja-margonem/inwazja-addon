// ==UserScript==
// @name         Inwazja Add-on | Modu≈Çowy Loader
// @namespace    http://tampermonkey.net/
// @version      2.0.0
// @description  ≈Åaduje modu≈Çy Inwazja Add-on z GitHub Pages
// @author       Anon
// @match        *://*.margonem.pl/*
// @grant        GM_addStyle
// ==/UserScript==

(function() {
    'use strict';
    
    const BASE_URL = "https://twojanazwa.github.io/inwazja-addon/modules/";
    const VERSION = "2.0.0";
    
    const modules = [
        "core-ui.js",
        "auto-message.js", 
        "inventory.js",
        "clan.js",
        "skills.js",
        "quests.js",
        "settings.js"
    ];
    
    function loadModule(moduleName) {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = `${BASE_URL}${moduleName}?v=${VERSION}`;
            script.onload = () => {
                console.log(`‚úÖ Inwazja: za≈Çadowano ${moduleName}`);
                resolve();
            };
            script.onerror = () => {
                console.error(`‚ùå Inwazja: b≈ÇƒÖd ≈Çadowania ${moduleName}`);
                reject();
            };
            document.head.appendChild(script);
        });
    }
    
    async function loadAllModules() {
        console.log('üöÄ Inwazja Add-on: rozpoczynanie ≈Çadowania modu≈Ç√≥w...');
        
        for (const module of modules) {
            try {
                await loadModule(module);
            } catch (error) {
                console.warn(`‚ö†Ô∏è Inwazja: pominiƒôto ${module} z powodu b≈Çƒôdu`);
            }
        }
        
        console.log('üéâ Inwazja Add-on: wszystkie modu≈Çy za≈Çadowane');
    }
    
    // Zaczekaj a≈º strona siƒô za≈Çadze
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadAllModules);
    } else {
        loadAllModules();
    }
})();
